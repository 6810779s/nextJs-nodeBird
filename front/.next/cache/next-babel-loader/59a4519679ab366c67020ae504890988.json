{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/eunheejang/Desktop/\\u110B\\u1173\\u11AB\\u1112\\u1174/programming/program/nextJs-nodeBird/front/pages/index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport AppLayout from \"../components/AppLayout\";\nimport Loading from \"../components/Loading\";\nimport PostCard from \"../components/PostCard\";\nimport PostForm from \"../components/PostForm\";\nimport { LOAD_POST_REQUEST } from \"../constants/post\";\nimport { useInView } from \"react-intersection-observer\";\n\nvar Home = function Home() {\n  _s();\n\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      me = _useSelector.me;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      mainPosts = _useSelector2.mainPosts,\n      hasMorePosts = _useSelector2.hasMorePosts,\n      loadPostLoading = _useSelector2.loadPostLoading;\n\n  var _useInView = useInView(),\n      _useInView2 = _slicedToArray(_useInView, 2),\n      ref = _useInView2[0],\n      inView = _useInView2[1];\n\n  useEffect(function () {\n    dispatch({});\n  });\n  useEffect(function () {\n    if (inView && !loadPostLoading && hasMorePosts) {\n      dispatch({\n        type: LOAD_POST_REQUEST\n      });\n    }\n  }, [inView]);\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 5\n    }\n  }, __jsx(AppLayout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, me && __jsx(PostForm, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 16\n    }\n  }), mainPosts.map(function (post) {\n    return __jsx(PostCard, {\n      key: post.id,\n      post: post,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 11\n      }\n    });\n  }), __jsx(\"div\", {\n    ref: ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, hasMorePosts && __jsx(Loading, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 41\n    }\n  }))));\n};\n\n_s(Home, \"ma5XAoOCfPVR/BcDTPBAvyc3CPk=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useInView];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/Users/eunheejang/Desktop/은희/programming/program/nextJs-nodeBird/front/pages/index.js"],"names":["React","useEffect","useSelector","useDispatch","AppLayout","Loading","PostCard","PostForm","LOAD_POST_REQUEST","useInView","Home","dispatch","state","user","me","post","mainPosts","hasMorePosts","loadPostLoading","ref","inView","type","map","id"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,iBAAT,QAAkC,mBAAlC;AACA,SAASC,SAAT,QAA0B,6BAA1B;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA;;AACjB,MAAMC,QAAQ,GAAGR,WAAW,EAA5B;;AACA,qBAAeD,WAAW,CAAC,UAACU,KAAD;AAAA,WAAWA,KAAK,CAACC,IAAjB;AAAA,GAAD,CAA1B;AAAA,MAAQC,EAAR,gBAAQA,EAAR;;AACA,sBAAqDZ,WAAW,CAC9D,UAACU,KAAD;AAAA,WAAWA,KAAK,CAACG,IAAjB;AAAA,GAD8D,CAAhE;AAAA,MAAQC,SAAR,iBAAQA,SAAR;AAAA,MAAmBC,YAAnB,iBAAmBA,YAAnB;AAAA,MAAiCC,eAAjC,iBAAiCA,eAAjC;;AAGA,mBAAsBT,SAAS,EAA/B;AAAA;AAAA,MAAOU,GAAP;AAAA,MAAYC,MAAZ;;AAEAnB,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,GAFQ,CAAT;AAIAV,EAAAA,SAAS,CAAC,YAAM;AACd,QAAImB,MAAM,IAAI,CAACF,eAAX,IAA8BD,YAAlC,EAAgD;AAC9CN,MAAAA,QAAQ,CAAC;AACPU,QAAAA,IAAI,EAAEb;AADC,OAAD,CAAR;AAGD;AACF,GANQ,EAMN,CAACY,MAAD,CANM,CAAT;AAQA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGN,EAAE,IAAI,MAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADT,EAEGE,SAAS,CAACM,GAAV,CAAc,UAACP,IAAD;AAAA,WACb,MAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,IAAI,CAACQ,EAApB;AAAwB,MAAA,IAAI,EAAER,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADa;AAAA,GAAd,CAFH,EAKE;AAAK,IAAA,GAAG,EAAEI,GAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgBF,YAAY,IAAI,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAhC,CALF,CADF,CADF;AAWD,CA/BD;;GAAMP,I;UACaP,W,EACFD,W,EACsCA,W,EAG/BO,S;;;KANlBC,I;AAiCN,eAAeA,IAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport AppLayout from \"../components/AppLayout\";\nimport Loading from \"../components/Loading\";\nimport PostCard from \"../components/PostCard\";\nimport PostForm from \"../components/PostForm\";\nimport { LOAD_POST_REQUEST } from \"../constants/post\";\nimport { useInView } from \"react-intersection-observer\";\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const { me } = useSelector((state) => state.user);\n  const { mainPosts, hasMorePosts, loadPostLoading } = useSelector(\n    (state) => state.post\n  );\n  const [ref, inView] = useInView();\n\n  useEffect(() => {\n    dispatch({})\n  })\n\n  useEffect(() => {\n    if (inView && !loadPostLoading && hasMorePosts) {\n      dispatch({\n        type: LOAD_POST_REQUEST,\n      });\n    }\n  }, [inView]);\n\n  return (\n    <div>\n      <AppLayout>\n        {me && <PostForm />}\n        {mainPosts.map((post) => (\n          <PostCard key={post.id} post={post} />\n        ))}\n        <div ref={ref}>{hasMorePosts && <Loading />}</div>\n      </AppLayout>\n    </div>\n  );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}